#
# DB2 11 for windows10 memo
#

#-------------------------------------------------------------------------------
# インスタンスの起動
#-------------------------------------------------------------------------------
db2start

#-------------------------------------------------------------------------------
# インスタンス停止
#-------------------------------------------------------------------------------
db2stop

#-------------------------------------------------------------------------------
# データベースに接続
# SAMPLEはインストール時に自動的に作られたサンプル用スキーマ
# コマンド行プロセッサを立ち上げたSQLを直接打っても問題なし
# 以下のコマンドではユーザを指定していないので、コマンド行プロセッサーを起動
# するOSユーザの権限で接続する（DB2のセットアップ時にOS権限はどうする？と出ていたはず）
#-------------------------------------------------------------------------------
db2 "CONNECT TO SAMPLE"

(出力例)
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
db2 => CONNECT TO SAMPLE

   データベース接続情報

 データベース・サーバー = DB2/NT64 11.1.4.4
 SQL 許可 ID            = (OSユーザ名)
 ローカル・データベース別名 = SAMPLE
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

#-------------------------------------------------------------------------------
# ユーザを指定する場合には、USERとUSINGを指定する
#-------------------------------------------------------------------------------
db2 "CONNECT TO SAMPLE USER db2admin USING db2admin"

(出力例)
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
db2 => CONNECT TO SAMPLE

   データベース接続情報

 データベース・サーバー = DB2/NT64 11.1.4.4
 SQL 許可 ID            = db2admin
 ローカル・データベース別名 = SAMPLE
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

#-------------------------------------------------------------------------------
# DB一覧を見る (以下はすべて、CONNECTで接続したあとのコマンド行プロセッサー経由で確認）
#-------------------------------------------------------------------------------
LIST DATABASE DIRECTORY

(出力例)
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
db2 => LIST DATABASE DIRECTORY

 システム・データベース・ディレクトリー

 ディレクトリー中の項目数 = 1

データベース 1 項目:

 データベース別名                     = SAMPLE
 データベース名                       = SAMPLE
 ローカル・データベース・ディレクトリー = D:
 データベース・リリース・レベル       = 14.00
 コメント                       =
 ディレクトリー項目タイプ             = 間接
 カタログ・データベース・パーティション番号 = 0
 代替サーバー・ホスト名               =
 代替サーバーのポート番号             =
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


#-------------------------------------------------------------------------------
# 表の一覧を表示
#-------------------------------------------------------------------------------
LIST TABLES FOR ALL

++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
db2 => list tables

表/ビュー                       スキーマ        タイプ 作成時刻
------------------------------- --------------- ----- --------------------------
ACT                             (OSユーザ)      T     2019-04-13-18.29.15.849003
ADEFUSR                         (OSユーザ)      S     2019-04-13-18.29.19.754001
CATALOG                         (OSユーザ)      T     2019-04-13-18.29.26.651001
・・・

  694 レコードが選択されました。
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

#-------------------------------------------------------------------------------
# 自分のスキーマにあるテーブルを見たいのなら"FOR ALL"をはずる
#-------------------------------------------------------------------------------
LIST TABLES

#-------------------------------------------------------------------------------
# テーブル作成
# (note) CRLFの改行コードを入れるとコマンド行の終了と解釈されたうまくいかない
#-------------------------------------------------------------------------------
create table META_GET_TEST (id  char(10) not null, name varchar(20), num decimal(3), fchar graphic(20), PRIMARY KEY(id))
#-------------------------------------------------------------------------------
# テーブル定義の確認
#-------------------------------------------------------------------------------
describe table META_GET_TEST

(出力例)
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
db2 => describe table META_GET_TEST

                                データ・タイ データ・         列の       スケ
列名                            プ・スキーマ タイプ名         長さ       ール  NULL
------------------------------- --------- ------------------- ---------- ----- ------
ID                              SYSIBM    CHARACTER                   10     0 いいえ
NAME                            SYSIBM    VARCHAR                     20     0 はい
NUM                             SYSIBM    DECIMAL                      3     0 はい
FCHAR                           SYSIBM    GRAPHIC                     20     0 はい

  4 レコードが選択されました。
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


#-------------------------------------------------------------------------------
# テーブルを検索する
# (note)
# sampleが作られた時にいくつかのテーブルが作成される。
# だがそれらのテーブル所有者は、sampleを作った時にログインしていた時の
# ユーザが所有者になっている。
#-------------------------------------------------------------------------------
select * from META_GET_TEST


#-------------------------------------------------------------------------------
# コマンド行プロセッサーとの接続解除
#-------------------------------------------------------------------------------
TERMINATE


https://www-01.ibm.com/support/docview.wss?uid=swg21601089

#-------------------------------------------------------------------------------
# JDBCバージョンを確認する
# (note) インストールするとデフォルトでCLASSPATHが通っているのでjar指定は不要
#-------------------------------------------------------------------------------
java com.ibm.db2.jcc.DB2Jcc -version

(出力例)
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
IBM DB2 JDBC Universal Driver Architecture 3.72.52
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

#-------------------------------------------------------------------------------
# IBM Data Server Driver for JDBC and SQLJの場合
#-------------------------------------------------------------------------------
・ドライバクラス名
com.ibm.db2.jcc.DB2Driver

・JDBC4.0のJARファイル
DB2\SQLLIB\java\db2jcc4.jar

・ドライバURL
jdbc:db2://localhost:50000/SAMPLE

